<!-- templates/admin_create_appointment.html -->
{% extends "base.html" %}
{% block title %}Create Appointment (Admin){% endblock %}
{% block content %}
<div class="bg-white p-8 rounded-lg shadow-xl mb-8 max-w-2xl mx-auto">
    <h1 class="text-4xl font-bold text-blue-800 mb-6 flex items-center">
        <i class="fas fa-calendar-plus mr-4 text-blue-500"></i> Create New Appointment
    </h1>
    <p class="text-gray-700 text-lg mb-8">Schedule an appointment for any patient with any doctor.</p>

    <form method="POST" class="space-y-6">
        <div class="form-group">
            <label for="patient_id" class="block text-sm font-medium text-gray-700 mb-1">Select Patient</label>
            <select id="patient_id" name="patient_id"
                    class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                    required>
                <option value="">-- Select Patient --</option>
                {% for patient in patients %}
                <option value="{{ patient.user_id }}">{{ patient.full_name }} ({{ patient.user.username }})</option>
                {% endfor %}
            </select>
        </div>

        <div class="form-group">
            <label for="doctor_id" class="block text-sm font-medium text-gray-700 mb-1">Select Doctor</label>
            <select id="doctor_id" name="doctor_id"
                    class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                    required>
                <option value="">-- Select Doctor --</option>
                {% for doctor in doctors %}
                <option value="{{ doctor.user_id }}">{{ doctor.full_name }} ({{ doctor.user.username }})</option>
                {% endfor %}
            </select>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
            <div class="form-group">
                <label for="appointment_date" class="block text-sm font-medium text-gray-700 mb-1">Appointment Date</label>
                <input type="date" id="appointment_date" name="appointment_date"
                       class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                       min="{{ today }}" required>
            </div>
            <div class="form-group">
                <label for="appointment_time" class="block text-sm font-medium text-gray-700 mb-1">Appointment Time</label>
                <input type="time" id="appointment_time" name="appointment_time"
                       class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                       required>
            </div>
        </div>

        <div class="form-group">
            <label for="reason" class="block text-sm font-medium text-gray-700 mb-1">Reason for Appointment</label>
            <textarea id="reason" name="reason" rows="3"
                      class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"></textarea>
        </div>

        <div class="form-group">
            <label for="status" class="block text-sm font-medium text-gray-700 mb-1">Initial Status</label>
            <select id="status" name="status"
                    class="mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 sm:text-sm"
                    required>
                <option value="Pending">Pending</option>
                <option value="Confirmed">Confirmed</option>
            </select>
        </div>

        <button type="submit"
                class="w-full inline-flex justify-center py-3 px-6 border border-transparent shadow-sm text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out">
            Create Appointment
        </button>
    </form>
</div>
{% endblock %}
